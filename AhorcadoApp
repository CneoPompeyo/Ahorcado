import tkinter as tk
from Ahorcado import Ahorcado  # Importa tu clase Ahorcado

class AhorcadoApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Juego de Ahorcado")
        
        # Campo de entrada para la palabra secreta
        label = tk.Label(root, text="Ingresa la palabra secreta:", font=("Helvetica", 14))
        label.pack(pady=10)
        
        # Campo de entrada para ingresar la palabra secreta, con asteriscos
        self.palabra_entry = tk.Entry(root, font=("Helvetica", 14), show="*")
        self.palabra_entry.pack(pady=5)
        
        # Botón para confirmar la palabra y empezar el juego
        self.empezar_button = tk.Button(root, text="Empezar Juego", command=self.iniciar_juego)
        self.empezar_button.pack(pady=10)

        # Ocultar los elementos de juego hasta que se confirme la palabra secreta
        self.ocultar_elementos_juego()

    def ocultar_elementos_juego(self):
        """Oculta los elementos de la interfaz del juego hasta que se ingrese la palabra secreta."""
        self.palabra_label = tk.Label(self.root, font=("Helvetica", 24))
        self.letra_entry = tk.Entry(self.root, font=("Helvetica", 18), width=5)
        self.adivinar_button = tk.Button(self.root, text="Adivinar Letra", command=self.adivinar_letra)
        self.palabra_completa_entry = tk.Entry(self.root, font=("Helvetica", 18), width=20)
        self.adivinar_palabra_button = tk.Button(self.root, text="Adivinar Palabra", command=self.adivinar_palabra)
        self.usadas_label = tk.Label(self.root, text="Letras usadas: ", font=("Helvetica", 16))
        self.mensaje_label = tk.Label(self.root, text="", font=("Helvetica", 16), fg="red")

    def iniciar_juego(self):
        """Inicia el juego con la palabra ingresada y muestra la interfaz del juego."""
        palabra = self.palabra_entry.get().upper()
        if palabra:
            self.juego = Ahorcado(palabra)
            
            # Oculta el campo de palabra secreta y el botón de inicio
            self.palabra_entry.pack_forget()
            self.empezar_button.pack_forget()

            # Muestra la interfaz del juego
            self.mostrar_elementos_juego()

    def mostrar_elementos_juego(self):
        """Muestra los elementos de la interfaz del juego."""
        self.palabra_label.config(text=" ".join(self.juego.palabraescondida))
        self.palabra_label.pack(pady=10)

        self.letra_entry.pack(pady=10)
        self.adivinar_button.pack(pady=10)
        self.palabra_completa_entry.pack(pady=10)
        self.adivinar_palabra_button.pack(pady=10)
        self.usadas_label.pack(pady=10)
        self.mensaje_label.pack(pady=10)

    def actualizar_interfaz(self, mensaje=""):
        """Actualiza la interfaz de usuario con el estado actual del juego."""
        # Actualiza la palabra escondida y las letras usadas
        self.palabra_label.config(text=" ".join(self.juego.palabraescondida))
        self.usadas_label.config(text="Letras usadas: " + ", ".join(self.juego.letrasUsadas))
        self.mensaje_label.config(text=mensaje)

        # Verifica si el juego ha terminado
        if mensaje == "GANASTE" or mensaje == "PERDISTE":
            self.letra_entry.config(state="disabled")
            self.adivinar_button.config(state="disabled")
            self.palabra_completa_entry.config(state="disabled")
            self.adivinar_palabra_button.config(state="disabled")

    def adivinar_letra(self):
        letra = self.letra_entry.get().upper()
        if letra:
            resultado = self.juego.pruebaLetra(letra)
            self.actualizar_interfaz(mensaje=resultado)
            self.letra_entry.delete(0, tk.END)

    def adivinar_palabra(self):
        palabra_intento = self.palabra_completa_entry.get().upper()
        if palabra_intento:
            resultado = self.juego.verificarPalabra(palabra_intento)  # Asegúrate de que este método exista en Ahorcado
            self.actualizar_interfaz(mensaje=resultado)
            self.palabra_completa_entry.delete(0, tk.END)

# Configuración de la ventana principal de Tkinter
root = tk.Tk()
app = AhorcadoApp(root)
root.mainloop()
